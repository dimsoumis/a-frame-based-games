<html>
<head>

<title>Game Test</title>
<link rel="icon" type="image/png" href="../../images/favicon.png"/>

 <link rel="stylesheet" href="../../styles/dim-custom.css">
 
 <script src="../../scripts/dim-custom.js" type="text/javascript"></script>
 <script src="../../scripts/sweetalert2.all.min.js"></script> 
   
   
 
 
  <script src="https://jesstelford.github.io/aframe-click-drag-component/build.js"></script>
  
<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v5.0.0/dist/aframe-extras.min.js"></script>
<script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>

 
<script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
 
  <!--  <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>  -->
  <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>

<script>

// registerAframeClickDragComponent(window.AFRAME);

 var posChecker = 0;
var clicksCounter = 0;
   
   function getRandomInt(max) {
  return Math.floor(Math.random() * max);
}

   
AFRAME.registerComponent('clickhandler', {
        schema: {
          txt: {default:'default'}
        },        
        init: function () {
          var data = this.data;
          var el = this.el;        
          el.addEventListener('mouseup', function () {            
           console.log(data.txt);
           
           var cube = document.querySelector("a-box");
           var positCube = cube.getAttribute("position");
           
           if (posChecker == 0) {
           if (positCube.x < -5) {
        // reset position
        cube.setAttribute("position", "0 1.5 -5");
        clicksCounter++;
        document.getElementById("counterBox").innerHTML = clicksCounter;
     
     
     posChecker = getRandomInt(2);
      
      if (posChecker == 1) {
      document.getElementById("perigrafi").style.display = "none";
      document.getElementById("perigrafi2").style.display = "block";
     }
     
        if (clicksCounter == 10) {
                 Swal.fire({
  title: 'Συγχαρητήρια, ολοκλήρωσες επιτυχώς το επίπεδο!',
  showDenyButton: false,
  showCancelButton: false,
  confirmButtonText: `Κλείσιμο Παραθύρου`,
  denyButtonText: `Ξαναπαίξε το ίδιο Επίπεδο`,
  cancelButtonText: `Κλείσιμο Παραθύρου`,
}).then((result) => {
  if (result.isConfirmed) {
// do nothing
  } else if (result.isDenied) {
    location.reload(); 
  }
})
            }
      } 
      
      
     } else {
       if (positCube.x > 5) {
        // reset position
        cube.setAttribute("position", "0 1.5 -5");
        clicksCounter++;
        document.getElementById("counterBox").innerHTML = clicksCounter;
      
      posChecker = getRandomInt(2);
      
      if (posChecker == 0) {
      document.getElementById("perigrafi").style.display = "block";
      document.getElementById("perigrafi2").style.display = "none";
     }
     
        if (clicksCounter == 10) {
                 Swal.fire({
  title: 'Συγχαρητήρια, ολοκλήρωσες επιτυχώς το επίπεδο!',
  showDenyButton: false,
  showCancelButton: false,
  confirmButtonText: `Κλείσιμο Παραθύρου`,
  denyButtonText: `Ξαναπαίξε το ίδιο Επίπεδο`,
  cancelButtonText: `Κλείσιμο Παραθύρου`,
}).then((result) => {
  if (result.isConfirmed) {
// do nothing
  } else if (result.isDenied) {
    location.reload(); 
  }
})
            }
     } 
      
      
     }
     
            
           
            
            
            
          });        
        }
      });
      
      
</script>
   
  </head>
  
  
  <body>
  
  
  <div id="counterArea"><div id="counterTxt">Score:</div> <div id="counterBox"></div></div>

<div id="perigrafi">Μετακίνησε τον κύβο αριστερά</div>
<div id="perigrafi2" style="display: none;">Μετακίνησε τον κύβο δεξιά</div>

    <a-scene>
      
      
      
      
         <a-box  id="box" position="0 1.5 -5" rotation="0 0 0" color="#f00" click-drag clickhandler></a-box>
            
      
      <a-cylinder position="-5 1.5 -5" radius="0.1" height="111" color="#ccc" ></a-cylinder>
      <a-cylinder position="5 1.5 -5" radius="0.1" height="111" color="#ccc"></a-cylinder>
      
      
      <a-plane position="0 0 0" rotation="-90 0 0" width="100%" height="50%" color="#7BC8A4"></a-plane>
      <a-sky color="#87CEEB"></a-sky>



       <a-entity position="0 1 5">
        <a-camera look-controls-enabled="true" keyboard-controls="mode: fps">
      <a-cursor color="#4CC3D9"></a-cursor> 
  
  
        </a-camera>
        
       
      </a-entity>
       
      
      
      
      
      
      
      
      
      
    </a-scene>
  </body>
  
  


</html>
